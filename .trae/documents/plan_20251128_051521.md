# 实验4运行问题解决计划

## 问题分析
- 实验4运行失败，错误信息为"Cannot compare tz-naive and tz-aware timestamps"
- 这是因为实验4是新创建的，其配置没有被之前的脚本处理，仍然使用了带有UTC时区的时间戳
- 当QLib尝试比较不同格式的时间戳时，就会出现这个错误

## 解决方案

### 1. 修改实验创建和更新函数
- 修改`create_experiment`函数，在创建实验时自动转换配置中的时间戳格式
- 修改`update_experiment`函数，在更新实验配置时自动转换时间戳格式
- 这样确保所有新创建的实验和更新的实验配置都使用正确的时间戳格式

### 2. 增强训练任务的时间戳处理
- 修改`train.py`中的代码，在处理实验配置时再次确保时间戳格式正确
- 增加双重保障，避免时间戳格式错误

### 3. 更新所有现有实验的配置
- 运行`update_experiment_config.py`脚本，更新所有现有实验的配置
- 确保所有实验都使用一致的时间戳格式

### 4. 测试实验4运行
- 重新运行实验4，验证问题是否解决
- 确保实验能够正常运行，完成模型训练

## 预期结果
- 所有实验配置都使用一致的时间戳格式
- 实验4能够正常运行，没有"Cannot compare tz-naive and tz-aware timestamps"错误
- 系统能够处理所有实验的配置，无论实验是何时创建的

## 代码修改点
1. `/home/idea/code/qlib_t/backend/app/services/experiment.py` - 修改create_experiment和update_experiment函数
2. `/home/idea/code/qlib_t/backend/app/tasks/train.py` - 增强时间戳处理逻辑
3. `/home/idea/code/qlib_t/backend/update_experiment_config.py` - 运行脚本更新所有实验配置