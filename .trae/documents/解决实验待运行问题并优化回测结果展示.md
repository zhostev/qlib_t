## 问题分析

1. **实验一直处于待运行状态**：
   - 点击运行按钮后，实验状态变为"pending"，但没有进一步执行
   - 原因：任务执行器（TaskWorker）存在，但主程序中没有启动它
   - 任务执行器负责定期检查并执行pending任务

2. **回测结果展示优化**：
   - 当前只展示了基本性能指标（总收益、年化收益、夏普比率、最大回撤）
   - 缺少更详细的回测分析数据
   - 图表展示功能有限

## 解决方案

### 1. 解决实验待运行问题

**修改后端主程序，启动任务执行器**：
- 修改 `/home/idea/code/qlib_t/backend/main.py`
- 添加异步任务执行器的启动代码
- 确保任务执行器与FastAPI应用一起运行

**实现步骤**：
1. 导入TaskWorker类
2. 创建并启动任务执行器实例
3. 配置任务执行器参数（如最大并行任务数）
4. 确保任务执行器在应用关闭时正确停止

### 2. 优化回测结果展示

**后端优化**：
- 确保训练任务完成后，将完整的回测结果保存到实验性能字段
- 丰富回测结果数据，包括月度收益、回撤曲线、持仓分析等

**前端优化**：
- 修改 `/home/idea/code/qlib_t/frontend/src/pages/Experiments.tsx`
- 增强性能指标展示，添加更多关键指标
- 优化图表展示，添加多种图表类型（如回撤曲线、月度收益柱状图等）
- 改进数据可视化效果，提升用户体验

**实现步骤**：
1. 扩展实验性能指标，添加更多回测结果数据
2. 优化前端图表配置，支持多种图表类型
3. 添加交互功能，允许用户切换不同的图表视图
4. 改进数据展示格式，提升可读性

## 预期效果

1. **实验运行正常**：
   - 点击运行按钮后，实验状态从"pending"变为"running"
   - 任务执行器自动执行实验任务
   - 实验完成后状态变为"completed"

2. **回测结果展示优化**：
   - 展示更丰富的性能指标
   - 提供多种图表类型，直观展示回测结果
   - 支持交互操作，提升用户体验

## 技术实现

- 后端使用FastAPI和异步任务执行器
- 前端使用React和ECharts进行数据可视化
- 数据库使用SQLAlchemy进行状态管理

## 风险评估

1. **任务执行器启动失败**：
   - 解决方案：添加错误处理和日志记录
   - 监控任务执行器状态，确保正常运行

2. **回测结果数据过大**：
   - 解决方案：优化数据存储和传输
   - 实现数据分页和按需加载

3. **前端性能问题**：
   - 解决方案：优化图表渲染，使用虚拟滚动
   - 实现数据缓存，减少重复请求

## 测试计划

1. **功能测试**：
   - 测试实验运行流程，确保状态正确流转
   - 测试回测结果展示，确保数据完整准确

2. **性能测试**：
   - 测试多任务并行执行情况
   - 测试大量实验数据的展示性能

3. **用户体验测试**：
   - 测试界面交互流畅度
   - 测试图表展示效果和交互功能

通过以上方案，我们可以解决实验一直处于待运行状态的问题，并优化回测结果展示，提升用户体验。