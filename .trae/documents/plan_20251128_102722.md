# Docker配置更新计划

## 目标
更新docker配置文件，支持任务和web解耦，数据库独立

## 分析
当前docker-compose.yml包含三个服务：
- backend：Web服务，端口8000
- frontend：前端服务，端口3000
- mysql：数据库服务，端口3306

后端包含任务处理功能，通过start_worker.sh启动任务执行器。需要将任务处理从web服务中分离出来，成为独立的服务。

## 实现步骤
1. **更新docker-compose.yml**：
   - 保留现有的backend、frontend和mysql服务
   - 添加task_worker服务，用于处理任务
   - 确保所有服务都连接到同一个网络
   - 配置适当的依赖关系

2. **配置task_worker服务**：
   - 使用与backend相同的镜像构建配置
   - 但启动命令改为执行任务执行器（start_worker.sh）
   - 配置相同的环境变量，特别是数据库连接信息
   - 共享必要的卷

3. **确保服务间通信**：
   - 所有服务使用相同的网络
   - 后端和任务执行器都依赖于mysql
   - 前端依赖于后端

4. **数据库独立配置**：
   - 保持mysql服务独立
   - 配置持久化卷
   - 提供明确的数据库连接参数

## 预期结果
- Web服务（backend）和任务处理（task_worker）完全解耦
- 数据库服务独立运行，便于管理和扩展
- 各个服务可以独立部署和扩展
- 服务间通过明确的依赖关系和网络进行通信