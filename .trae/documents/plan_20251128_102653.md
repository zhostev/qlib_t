# Implement Graphical Reports for Experiment Detail Page

## Overview
Add comprehensive graphical reports to the experiment detail page (`/experiments/:id`) to display model performance and analysis results.

## Implementation Steps

### 1. Backend Changes

#### 1.1 Add Analysis Service
- Create a new service `analysis.py` in `backend/app/services/` to handle report generation
- Implement methods to generate all required report data:
  - Signal analysis (IC, Auto Correlation, etc.)
  - Portfolio analysis (Cumulative Return, Return distribution, etc.)
  - Backtest return analysis

#### 1.2 Add API Endpoints
- Add new endpoints to `backend/app/api/experiments.py`:
  - `GET /experiments/{experiment_id}/analysis` - Get all analysis data
  - `GET /experiments/{experiment_id}/analysis/signal` - Get signal analysis data
  - `GET /experiments/{experiment_id}/analysis/portfolio` - Get portfolio analysis data

#### 1.3 Update Experiment Service
- Modify `experiment.py` service to store additional analysis data in the performance field
- Ensure analysis data is generated when an experiment completes

### 2. Frontend Changes

#### 2.1 Update ExperimentDetail Component
- Modify `frontend/src/pages/ExperimentDetail.tsx` to include new sections for graphical reports
- Add tabs or expandable sections for different report categories:
  - Forecasting Signal Analysis
  - Portfolio Analysis
  - Backtest Return Analysis

#### 2.2 Create Report Components
- Create new components in `frontend/src/components/` for each report type:
  - `SignalAnalysis.tsx` - For IC, Auto Correlation, etc.
  - `PortfolioAnalysis.tsx` - For Cumulative Return, Return distribution, etc.
  - `BacktestReport.tsx` - For backtest results

#### 2.3 Add Charting Logic
- Use ECharts (already in use) to create interactive charts for each metric
- Implement data processing functions to format backend data for charts

### 3. Report Types to Implement

#### 3.1 Forecasting Signal Analysis
- Cumulative Return of groups
- Cumulative Return
- Return distribution
- long_short
- Information Coefficient (IC)
  - IC time series
  - Monthly IC
  - IC distribution
- Auto Correlation of forecasting signal
  - Auto Correlation time series

#### 3.2 Portfolio Analysis
- Backtest return
- Report summary
- Explanation of results

### 4. Data Flow

1. When an experiment completes, the backend generates analysis data
2. The frontend fetches this data when displaying the experiment detail page
3. The data is processed and rendered into interactive charts
4. Users can explore different report sections to analyze model performance

## Technical Considerations

- Use existing QLib report generation modules (`qlib.contrib.report`)
- Ensure reports are generated efficiently and don't impact system performance
- Make charts interactive with zoom, hover, and download capabilities
- Ensure responsive design for different screen sizes
- Add loading states while reports are being generated/fetched

## Files to Modify

### Backend
- `backend/app/api/experiments.py` - Add new endpoints
- `backend/app/services/analysis.py` - Create analysis service
- `backend/app/services/experiment.py` - Update to generate analysis data

### Frontend
- `frontend/src/pages/ExperimentDetail.tsx` - Update experiment detail page
- `frontend/src/components/SignalAnalysis.tsx` - New component
- `frontend/src/components/PortfolioAnalysis.tsx` - New component
- `frontend/src/components/BacktestReport.tsx` - New component
- `frontend/src/services/experiments.ts` - Add new API calls

## Expected Outcome

The experiment detail page will display comprehensive graphical reports that allow users to:
- Analyze model prediction quality through IC and auto-correlation metrics
- Evaluate portfolio performance with cumulative return and distribution charts
- Understand backtest results with detailed reports
- Make informed decisions about model improvements

This implementation will enhance the user experience by providing visual insights into model performance, making it easier to understand and compare different experiments.